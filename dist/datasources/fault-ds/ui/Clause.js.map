{"version":3,"sources":["../../../../src/datasources/fault-ds/ui/Clause.js"],"names":["_","UI","Clause","uiSegmentSrv","operator","restriction","RestrictionDTO","Restriction","controls","setOperator","newCondition","query","Controls","RemoveControl","AddControl","AddNestedControl","self","filter","control","Query","updateControls"],"mappings":";;;;;;;;;;;;;;;AAAOA,a;;AACCC,c,OAAAA,E;;;;;;;;;;;;;;;;;;;;;8BAEKC,M;AAET,gCAAYC,YAAZ,EAA0BC,QAA1B,EAAoCC,WAApC,EAAiD;AAAA;;AAC7C,wBAAIA,uBAAuBJ,GAAGK,cAA9B,EAA8C;AAC1CD,sCAAc,IAAIJ,GAAGM,WAAP,CAAmBJ,YAAnB,EAAiCE,WAAjC,CAAd;AACH;AACD,yBAAKF,YAAL,GAAoBA,YAApB;AACA,yBAAKE,WAAL,GAAmBA,WAAnB;AACA,yBAAKG,QAAL,GAAgB,EAAhB;AACA,yBAAKC,WAAL,CAAiBL,QAAjB;AACH;;;;gDAEWA,Q,EAAU;AAClB,6BAAKA,QAAL,GAAgB,KAAKD,YAAL,CAAkBO,YAAlB,CAA+BN,QAA/B,CAAhB;AACH;;;mDAEcO,K,EAAO;AAClB,4BAAMH,WAAW,CACb,IAAIP,GAAGW,QAAH,CAAYC,aAAhB,EADa,EAEb,IAAIZ,GAAGW,QAAH,CAAYE,UAAhB,EAFa,EAGb,IAAIb,GAAGW,QAAH,CAAYG,gBAAhB,EAHa,CAAjB;;AAMA,4BAAMC,OAAO,IAAb;AACA,6BAAKR,QAAL,GAAgBR,EAAEiB,MAAF,CAAST,QAAT,EAAmB,mBAAW;AAC1C,mCAAOU,QAAQD,MAAR,CAAeN,KAAf,EAAsBK,IAAtB,CAAP;AACH,yBAFe,CAAhB;;AAIA,4BAAI,KAAKX,WAAL,YAA4BJ,GAAGkB,KAAnC,EAA0C;AACtC,iCAAKd,WAAL,CAAiBe,cAAjB;AACH;AACJ","file":"Clause.js","sourcesContent":["import _ from 'lodash';\nimport {UI} from '../UI';\n\nexport class Clause {\n\n    constructor(uiSegmentSrv, operator, restriction) {\n        if (restriction instanceof UI.RestrictionDTO) {\n            restriction = new UI.Restriction(uiSegmentSrv, restriction);\n        }\n        this.uiSegmentSrv = uiSegmentSrv;\n        this.restriction = restriction;\n        this.controls = [];\n        this.setOperator(operator);\n    }\n\n    setOperator(operator) {\n        this.operator = this.uiSegmentSrv.newCondition(operator);\n    }\n\n    updateControls(query) {\n        const controls = [\n            new UI.Controls.RemoveControl(),\n            new UI.Controls.AddControl(),\n            new UI.Controls.AddNestedControl()\n        ];\n\n        const self = this;\n        this.controls = _.filter(controls, control => {\n            return control.filter(query, self);\n        });\n\n        if (this.restriction instanceof UI.Query) {\n            this.restriction.updateControls();\n        }\n    }\n}"]}