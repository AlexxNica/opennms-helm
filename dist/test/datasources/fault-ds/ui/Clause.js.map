{"version":3,"sources":["../../../../../src/datasources/fault-ds/ui/Clause.js"],"names":["Clause","uiSegmentSrv","operator","restriction","RestrictionDTO","Restriction","controls","setOperator","newCondition","query","Controls","RemoveControl","AddControl","AddNestedControl","self","filter","control","Query","updateControls"],"mappings":";;;;;;;;;AAAA;;;;AACA;;;;;;IAEaA,M,WAAAA,M;AAET,oBAAYC,YAAZ,EAA0BC,QAA1B,EAAoCC,WAApC,EAAiD;AAAA;;AAC7C,YAAIA,uBAAuB,OAAGC,cAA9B,EAA8C;AAC1CD,0BAAc,IAAI,OAAGE,WAAP,CAAmBJ,YAAnB,EAAiCE,WAAjC,CAAd;AACH;AACD,aAAKF,YAAL,GAAoBA,YAApB;AACA,aAAKE,WAAL,GAAmBA,WAAnB;AACA,aAAKG,QAAL,GAAgB,EAAhB;AACA,aAAKC,WAAL,CAAiBL,QAAjB;AACH;;;;oCAEWA,Q,EAAU;AAClB,iBAAKA,QAAL,GAAgB,KAAKD,YAAL,CAAkBO,YAAlB,CAA+BN,QAA/B,CAAhB;AACH;;;uCAEcO,K,EAAO;AAClB,gBAAMH,WAAW,CACb,IAAI,OAAGI,QAAH,CAAYC,aAAhB,EADa,EAEb,IAAI,OAAGD,QAAH,CAAYE,UAAhB,EAFa,EAGb,IAAI,OAAGF,QAAH,CAAYG,gBAAhB,EAHa,CAAjB;;AAMA,gBAAMC,OAAO,IAAb;AACA,iBAAKR,QAAL,GAAgB,iBAAES,MAAF,CAAST,QAAT,EAAmB,mBAAW;AAC1C,uBAAOU,QAAQD,MAAR,CAAeN,KAAf,EAAsBK,IAAtB,CAAP;AACH,aAFe,CAAhB;;AAIA,gBAAI,KAAKX,WAAL,YAA4B,OAAGc,KAAnC,EAA0C;AACtC,qBAAKd,WAAL,CAAiBe,cAAjB;AACH;AACJ","file":"Clause.js","sourcesContent":["import _ from 'lodash';\nimport {UI} from '../UI';\n\nexport class Clause {\n\n    constructor(uiSegmentSrv, operator, restriction) {\n        if (restriction instanceof UI.RestrictionDTO) {\n            restriction = new UI.Restriction(uiSegmentSrv, restriction);\n        }\n        this.uiSegmentSrv = uiSegmentSrv;\n        this.restriction = restriction;\n        this.controls = [];\n        this.setOperator(operator);\n    }\n\n    setOperator(operator) {\n        this.operator = this.uiSegmentSrv.newCondition(operator);\n    }\n\n    updateControls(query) {\n        const controls = [\n            new UI.Controls.RemoveControl(),\n            new UI.Controls.AddControl(),\n            new UI.Controls.AddNestedControl()\n        ];\n\n        const self = this;\n        this.controls = _.filter(controls, control => {\n            return control.filter(query, self);\n        });\n\n        if (this.restriction instanceof UI.Query) {\n            this.restriction.updateControls();\n        }\n    }\n}"]}